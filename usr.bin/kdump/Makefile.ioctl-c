#	$NetBSD: Makefile.ioctl-c,v 1.7 2003/04/18 14:43:49 christos Exp $

# NOTE: <bsd.own.mk> needs to be previously .included for NETBSDSRCDIR

.if !target(cleandir) && !target(obj)
DEPFILES != grep -l '_IO.*(' ${DESTDIR}/usr/include/sys/*.h
.endif

ioctl.c: mkioctls ${DEPFILES}
	CC="${CC}" DESTDIR=${DESTDIR} \
	    /bin/sh ${NETBSDSRCDIR}/usr.bin/kdump/mkioctls \
	    ${DESTDIR}/usr/include/sys/ioctl.h \
	    ${DESTDIR}/usr/include/sys/ioctl_compat.h > ioctl.c

${DEPFILES}: .PRECIOUS

.\"	$NetBSD: install,v 1.1 2001/11/30 23:48:51 thorpej Exp $
.\"
.\" Copyright (c) 2001 The NetBSD Foundation, Inc.     
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"        This product includes software developed by the NetBSD
.\"        Foundation, Inc. and its contributors.
.\" 4. Neither the name of The NetBSD Foundation nor the names of its
.\"    contributors may be used to endorse or promote products derived
.\"    from this software without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS
.\" ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
.\" TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
.\" PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
.\" BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
.\" SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
.\" INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
.\" CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
.\" ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"
.
.Ss2 Installation for the Intel IQ80310
The following steps describe how to set up an NFS root environment
for the IQ80310 and how to boot the IQ80310.
.Pp
.(enum
Place the kernel into the TFTP server's download area.
.Pp
RedBoot only loads S-Records, so select a kernel with the
.Dq .srec
filename suffix.  In this example, we will boot the kernel
hard-wired to use the on-board Ethernet as the root device.
.Pp
.Dl server# Ic cp netbsd-fxp0.srec /tftpboot/netbsd-iq80310-fxp0
.It
Unpack the distribution sets into the target's root directory.
.Pp
.Dl server# Ic cd /export/client/iq80310
.Dl server# Ic gzcat .../base.tgz | tar xvpf -
.Dl server# Ic gzcat .../etc.tgz | tar xvpf -
.Dl [ repeat for all sets you wish to unpack ]
.It
Load the kernel from the TFTP server.
.Pp
.Bd -literal
RedBoot> load netbsd-iq80310-fxp0
Entry point: 0xa0200000, address range: 0xa0200000-0xa035e07c
RedBoot>    
.Ed
.It
Start the kernel running.  The kernel will display boot message,
probe for devices, and mount the root file system.  If you used
a kernel hard-wired to use the on-board Ethernet, it will attempt
to mount the root file system automatically.  Otherwise, it will
prompt for the root device to use.
.Pp
Since the system's run-time environment has not yet been configured,
the system should boot into single-user mode.
.Pp
.Bd -literal
RedBoot> go

NetBSD/evbarm (IQ80310) booting ...
Resetting secondary PCI bus...
initarm: Configuring system ...
physmemory: 8192 pages at 0xa0000000 -> 0xa1ffffff
init subsystems: stacks vectors undefined pmap irq done.
 [ no symbols available ]
Copyright (c) 1996, 1997, 1998, 1999, 2000, 2001
    The NetBSD Foundation, Inc.  All rights reserved.
Copyright (c) 1982, 1986, 1989, 1991, 1993
    The Regents of the University of California.  All rights reserved.

NetBSD 1.5Y (IQ80310) #0: Fri Nov 30 11:23:26 PST 2001
    thorpej@dr-evil:/u1/netbsd/src/sys/arch/evbarm/compile/IQ80310
total memory = 32768 KB
avail memory = 25680 KB
using 435 buffers containing 1740 KB of memory
mainbus0 (root)
cpu0 at mainbus0: i80200 rev 0 (XScale core) DC enabled IC enabled WB enabled LABT
cpu0: 32KB/32B 32-way Instruction cache
cpu0: 32KB/32B 32-way write-back-locking Data cache
obio0 at mainbus0: board rev. F, CPLD rev. D, backplane present
com0 at obio0 addr 0xfe810000: ns16550a, working fifo
com0: console
com1 at obio0 addr 0xfe800000: ns16550a, working fifo
iopxs0 at mainbus0: i80312 Companion I/O, acting as PCI host
iopxs0: configuring Secondary PCI bus
pci0 at iopxs0 bus 1
pci0: i/o space, memory space enabled
ppb0 at pci0 dev 7 function 0: Digital Equipment DECchip 21154 PCI-PCI Bridge (rev. 0x05)
pci1 at ppb0 bus 2
pci1: i/o space, memory space enabled
fxp0 at pci1 dev 0 function 0: i82559S Ethernet, rev 9
fxp0: interrupting at CPLD irq 1
fxp0: Ethernet address 00:80:4d:46:0b:b9
inphy0 at fxp0 phy 1: i82555 10/100 media interface, rev. 4
inphy0: 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
clock: hz=100 stathz=0 profhz=0
boot device: <unknown>
root on fxp0
nfs_boot: trying DHCP/BOOTP
nfs_boot: DHCP next-server: 192.168.0.1
nfs_boot: my_name=iq80310.lab.wasabisystems.com
nfs_boot: my_domain=wasabisystems.com
nfs_boot: my_addr=192.168.0.10
nfs_boot: my_mask=255.255.255.0
nfs_boot: gateway=192.168.0.254
root on 192.168.0.1:/export/client/iq80310
/etc/rc.conf is not configured.  Multiuser boot aborted.
Enter pathname of shell or RETURN for sh: 
.Ed
.enum)

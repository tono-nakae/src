#! /bin/sh --
#
#	$NetBSD: checkflist,v 1.7 1998/06/30 05:13:31 ross Exp $
#
# Verify output of makeflist against contents of $DESTDIR.

[ "$DESTDIR" ] || {
	echo DESTDIR must be set
	exit 1
}

if [ "$1" = "-x11" ]; then
	sh makeflist -x > /tmp/_CHECK.$$
elif [ "$1" = "-both" ]; then
	sh makeflist -b > /tmp/_CHECK.$$
else
	sh makeflist > /tmp/_CHECK.$$
fi
( cd $DESTDIR ; find . \( -type d -o -type f -o -type l \) ) 	\
    | sed -e s:./usr/include/`uname -m`/:./usr/include/machine/:	\
    | sort							\
    | diff /tmp/_CHECK.$$ -
/bin/rm -f /tmp/_CHECK.$$

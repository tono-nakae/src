#!/bin/sh
#
# $NetBSD: makeflist,v 1.2 1996/05/20 19:10:28 gwr Exp $
#
# Print out the files in some or all lists.  Usage:
# makeflist [-arch arch] [-setd setsdir] [setname ...]
#

# set defaults
arch=`uname -m`
setd=`pwd`
lists="base comp etc games man misc text"

# handle args
while :
do
	case $1 in
	-arch)	arch=$2; shift;;
	-setd)	setd=$2; shift;;
	-*)	echo "bad option"; exit 1;;
	*)	break;;
	esac
	shift
done
[ "$@" ] && lists="$@"

# EXTRA SPECIAL (not done here): secr

for setname in $lists
do
	cat $setd/lists/$setname/mi $setd/lists/$setname/md.${arch}
	# Split man/md_share into: this arch, other arch
	if [ $setname = man ]; then
		grep ${arch} $setd/lists/man/md_share
	fi
	if [ $setname = misc ]; then
		grep -v ${arch} $setd/lists/man/md_share
	fi
done | sort

#	$NetBSD: Makefile.xdm,v 1.7 2013/06/03 23:25:43 mrg Exp $

XDMVARDIR=	/var/db/xdm
XDMDIR=		${X11ETCDIR}/xdm
XDMCHOOSERPATH=	${X11ROOTDIR}/libexec/chooser
XDMGREETERLIB=	${X11ROOTDIR}/lib/libXdmGreet.so
XDMLOGDIR=	/var/log
XDMPIDDIR=	/var/run

CPPFLAGS+=	-DBINDIR=\"${X11BINDIR}\" -DXDMDIR=\"${XDMDIR}\" \
		-DHASXDMAUTH ${X11FLAGS.CONNECTION} -DGREET_USER_STATIC \
		-DHAVE_ASPRINTF \
		-DFRAGILE_DEV_MEM -DARC4_RANDOM \
		-DXPM -DUSE_XFT -DUSE_XINERAMA \
		-UIPv6 \
		-DHAVE_SYS_PARAM_H \
		-DHAVE_DAEMON \
		-DHAVE_GETIFADDRS \
		-DHAVE_MKSTEMP \
		-DHAVE_SETPROCTITLE \
		-DHAVE_SETUSERCONTEXT \
		-DHAVE_ARC4RANDOM \
		-DHAVE_SIGACTION \
		-DHAVE_ASPRINTF \
		-I${X11SRCDIR.xdm} \
		-I${X11SRCDIR.xdm}/include \
		${X11FLAGS.VERSION}

LDFLAGS+=	-Wl,--export-dynamic

.if (${USE_PAM} != "no")
CPPFLAGS+=      -DUSE_PAM
.endif

.PATH:		${X11SRCDIR.xdm}
.PATH:		${X11SRCDIR.xdm}/xdm
.PATH:		${X11SRCDIR.xdm}/man
.PATH:		${X11SRCDIR.xdm}/chooser
.PATH:		${X11SRCDIR.xdm}/greeter
.PATH:		${X11SRCDIR.xdm}/app-defaults

#	$NetBSD: Makefile,v 1.1 2011/02/06 01:13:48 joerg Exp $

PROG_CXX=	llvmc
NOMAN=		yes

.include <bsd.init.mk>

.PATH: ${LLVM_SRCDIR}/tools/llvmc/src

SRCS=	Hooks.cpp \
	Main.cpp

TABLEGEN_SRC=		AutoGenerated.td
TABLEGEN_INCLUDES=	-I${.OBJDIR} -I${LLVM_SRCDIR}/tools/llvmc/src
TABLEGEN_OUTPUT= \
	AutoGenerated.inc|-gen-llvmc

.include "${.PARSEDIR}/../../tablegen.mk"

LLVM_LIBS+= \
	CompilerDriver \
	Support

DPSRCS+=	Base.td
CLEANFILES+=	Base.td

Base.td: Base.td.in
	${TOOL_SED} -e 's,@LLVMGCCCOMMAND@,llvm-gcc,g' \
	    -e 's,@LLVMGXXCOMMAND@,llvm-g++,g' < ${.ALLSRC} > ${.TARGET}

AutoGenerated.inc: Base.td

.include "${.PARSEDIR}/../../link.mk"

.include <bsd.prog.mk>

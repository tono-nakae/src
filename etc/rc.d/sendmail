#!/bin/sh
#
# $NetBSD: sendmail,v 1.8 2000/06/04 08:33:58 itojun Exp $
#

# PROVIDE: mail
# REQUIRE: LOGIN

#	we could do this, but make mail start late, so that things like
#	.forward's are not processed until the system is fully operational
## REQUIRE: DAEMON

. /etc/rc.subr

name="sendmail"
command="/usr/sbin/${name}"
pidfile="/var/run/${name}.pid"
required_files="/etc/mail/${name}.cf"

load_rc_config $name

# Die if there's pre-8.10 custom configuration file.  This check is mandatory
# for smooth upgrade.  See NetBSD PR 10100 for details.
#
if checkyesno sendmail && [ -f "/etc/${name}.cf" ]; then
	if ! cmp -s "/etc/mail/${name}.cf" "/etc/${name}.cf"; then
		err 1 "${name} was not started, you have multiple sendmail.cf."
	fi
fi

run_rc_command "$1"

#!/bin/sh
#
# $NetBSD: btcontrol,v 1.1 2006/07/26 11:14:55 tron Exp $
#

# PROVIDE: btcontrol
# REQUIRE: bluetooth
# BEFORE:  LOGIN

$_rc_subr_loaded . /etc/rc.subr

name="btcontrol"
rcvar=${name}
command="/usr/sbin/${name}"
start_cmd="btcontrol_start"
stop_cmd="btcontrol_stop"

btcontrol_start()
{
	echo 'Attaching Bluetooth devices:'

	#
	# If ${btcontrol_devices} is set, it should be a list of devices to
	# attach. Otherwise, all available devices will be attached.
	#

	devs="${btcontrol_devices:-$(cd /dev/ && echo btdev*)}"
	for dev in ${devs}; do
		${command} ${dev} attach -q
	done
}

btcontrol_stop()
{
	echo 'Detach Bluetooth devices:'

	devs="${btcontrol_devices:-$(cd /dev/ && echo btdev*)}"
	for dev in ${devs}; do
		${command} ${dev} detach -q
	done
}

load_rc_config ${name}
run_rc_command "$1"

#!/bin/sh
#
# $NetBSD: virecover,v 1.4 2000/10/09 05:33:53 nisimura Exp $
#

# PROVIDE: virecover
# REQUIRE: mountcritremote
#
# XXX: should require `mail'!

. /etc/rc.subr

name="virecover"
start_cmd="virecover_start" 
stop_cmd=":"

virecover_start()
{
	recover=`find /var/tmp/vi.recover -name 'recover.*' -type f -print`
	if [ -n "$recover" ]; then
		echo "Preserving editor files."
		for i in $recover; do
			sendmail -t < $i
		done
	fi
}

load_rc_config $name
run_rc_command "$1"

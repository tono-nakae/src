From leland@wacky.acet.org  Mon Nov 22 17:48:45 1993
Received: from mwunix.mitre.org by chsun.eunet.ch (8.6.4/1.34)
	id RAA09132; Mon, 22 Nov 1993 17:48:41 +0100
Received: from wacky.acet.org.acet.org ([192.188.104.18]) by mwunix.mitre.org (5.65c/SMI-2.2)
	id AA13343; Mon, 22 Nov 1993 11:46:42 -0500
Received: by wacky.acet.org.acet.org (4.1/SMI-4.1)
	id AA06945; Sun, 21 Nov 93 16:30:44 EST
Date: Sun, 21 Nov 93 16:30:44 EST
From: leland@wacky.acet.org (Robert Leland - PSI)
Message-Id: <9311212130.AA06945@wacky.acet.org.acet.org>
To: mw@chsun
Subject: SCSI tape driver.
Cc: leland@wacky.acet.org
Status: OR

I would like to change the way scsi tape /dev/rst  maps the minor device.
This will allow for the selection of more than just one density of tape.

Also though my Archive Viper 2525 drive can Read QIC-24 Tapes generated by
a sun tape drive, it has to do this by traversing the tape several times
until it figures it is a QIC-24, I would rather not wear out my tapes!
This change would allow all type drive types to specify 3 additional densities, other than
the default.
----------------------------- The Bottom Line(first)------------------------------
People currently using
                  /dev/rst0, rts1 .... rst15
would remain uneffected, regardless of tape drive type.

People using the Exabyte type tape drives including Python that normally use  
                 /dev/rst16 , /dev/rst32
would use instead:
                /dev/rst32, /dev/rst64
(See below for more details)
-------------------------------------------------------------------------------------
Current
   * Specific to Exabyte:
   * minor bit 4 [b1bbbb] (aka /dev/rst16) selects short filemarks
   * Specific to 8mm Drives.
   * minor bit 5 [1bbbbb] (aka /dev/rst32) selects fix block mode, 1k blocks.
   *

  Minor Device:    --------------------------------+  
                   | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
                   +---+---+---+---+---+---+---+---+
                     ^   ^   ^   ^   ^   ^   ^   ^
                     |   |   |   |   |   |   |___|_____ Unit Number
                     |   |   |   |   |   |_____________ NoRewind
                     |   |   |   |   |_________________ HiDensity
                     |   |   |   |_____________________ Short FileMarks 
                             |_________________________ Fix block mode 1K

-   -   -   -   -   -   -   -   -   -   -   -   -  -   -   -   -   -   -   -   -   -   -  
Proposed
   * Specific to Exabyte:
   * minor bit 5 [bb1bbbbb] (aka /dev/rst32) selects short filemarks
   * Specific to 8mm Drives.
   * minor bit 6 [bb1bbbbb] (aka /dev/rst64) selects fix block mode, 1k blocks.
   
  Minor Device:    --------------------------------+  
                   | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
                   +---+---+---+---+---+---+---+---+
                     ^   ^   ^   ^   ^   ^   ^   ^
                     |   |   |   |   |   |   |___|_____ Unit Number
                     |   |   |   |   |   |_____________ NoRewind
                     |   |   |   |___|_________________ HiDensity
                         |   |_________________________ Short FileMarks 
                         |_____________________________ Fix block mode 1K


Advantages: More similar to sun mapping, Keeps bits together.
Disadvantages: Possiblely some initial confusion.
-   -   -   -   -   -   -   -   -   -   -   -   -  -   -   -   -   -   -   -   -   -   -  
Alternate Proposed
 I would rather keep the density bits together but we could...
 Split the bits used for density Use bits 3 and 6:

  Minor Device:    --------------------------------+  
                   | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
                   +---+---+---+---+---+---+---+---+
                     ^   ^   ^   ^   ^   ^   ^   ^
                     |   |   |   |   |   |   |___|_____ Unit Number
                     |   |   |   |   |   |_____________ NoRewind
                     |   |   |   |   |___________________________________ HiDensity
                     |   |   |   |_____________________ Short FileMarks    |
                         |   |_________________________ Fix block mode 1K  |
                         |_________________________________________________|

This would mean that other users would remain uneffected.
-----------------------------------------------------------------------------------------
This change will also benefit other tape drives, so that specific densities can be specified.
Could really use three bits for density, however It's nice to have a spare bit for the future.


-Rob


